"use strict";(self.webpackChunk_robby_rabbitman_ngx=self.webpackChunk_robby_rabbitman_ngx||[]).push([[847],{"./libs/common/src/directives/control-error.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AsyncValidator:()=>AsyncValidator,Basic:()=>Basic,Multiple:()=>Multiple,ShowErrorOnDirtyOrTouched:()=>ShowErrorOnDirtyOrTouched,default:()=>control_error_stories});var fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),core=__webpack_require__("./node_modules/@angular/material/fesm2022/core.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),delay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/delay.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),fesm2022_core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),empty=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/empty.js");const EMPTY=(0,fesm2022_core.signal)(void 0).asReadonly(),signalize=source=>(0,fesm2022_core.isSignal)(source)?source:(0,fesm2022_core.signal)(source);function ifNonNull(source,thenBranch,elseBranch){return(0,fesm2022_core.computed)((()=>null!=source()?signalize(thenBranch(source()))():signalize(elseBranch?.()??EMPTY)()))}var _class;const dirty$=control=>{const dirty$=(0,fesm2022_core.signal)(control.dirty),markAsPristine=control.markAsPristine.bind(control),markAsDirty=control.markAsDirty.bind(control);return control.markAsPristine=(...args)=>{markAsPristine(...args),dirty$.set(!1)},control.markAsDirty=(...args)=>{markAsDirty(...args),dirty$.set(!0)},dirty$},touched$=control=>{const touched$=(0,fesm2022_core.signal)(control.touched),markAsTouched=control.markAsTouched.bind(control),markAsUntouched=control.markAsUntouched.bind(control);return control.markAsTouched=(...args)=>{markAsTouched(...args),touched$.set(!0)},control.markAsUntouched=(...args)=>{markAsUntouched(...args),touched$.set(!1)},touched$},DEFAULT_ERROR_STATE_MATCHER=(control,parent)=>control.invalid&&(control.touched||!!parent?.submitted),ERROR_STATE_MATCHER=new fesm2022_core.InjectionToken("NGX State Matcher",{factory:()=>DEFAULT_ERROR_STATE_MATCHER});let ControlError=(_class=class ControlError{constructor(){this._templateRef=(0,fesm2022_core.inject)(fesm2022_core.TemplateRef),this._viewContainerRef=(0,fesm2022_core.inject)(fesm2022_core.ViewContainerRef),this.track$=(0,fesm2022_core.signal)(void 0),this.parent$=(0,fesm2022_core.signal)((0,fesm2022_core.inject)(fesm2022_forms.sg,{optional:!0})??(0,fesm2022_core.inject)(fesm2022_forms.F,{optional:!0})??void 0),this.control$=(0,fesm2022_core.signal)(void 0),this.touched$=ifNonNull(this.control$,touched$),this.dirty$=ifNonNull(this.control$,dirty$),this.status$=(0,rxjs_interop.O4)((0,rxjs_interop.Dx)(this.control$).pipe((0,switchMap.w)((control=>control?.statusChanges??empty.E)))),this.value$=(0,rxjs_interop.O4)((0,rxjs_interop.Dx)(this.control$).pipe((0,switchMap.w)((control=>control?.valueChanges??empty.E)))),this.errorStateMatcher$=(0,fesm2022_core.signal)((0,fesm2022_core.inject)(ERROR_STATE_MATCHER)),this.hasError$=(0,fesm2022_core.computed)((()=>this._hasError$())),this._hasError$=(0,fesm2022_core.computed)((()=>{const track=this.track$(),control=this.control$(),parent=this.parent$(),errorStateMatcher=this.errorStateMatcher$();this.touched$(),this.dirty$(),this.value$(),this.status$();return!!(track&&control&&("string"==typeof track?control.hasError(track):track.some((x=>control.hasError(x))))&&errorStateMatcher(control,parent))}),{equal:()=>!1}),this._render$$=(0,fesm2022_core.effect)((()=>{const track=this.track$(),control=this.control$(),hasError=this._hasError$();this._viewContainerRef.clear(),hasError&&null!=control&&null!=track&&this._viewContainerRef.createEmbeddedView(this._templateRef,{$implicit:"string"==typeof track?control.getError(track):track.filter((x=>control.hasError(x))).reduce(((errors,x)=>({...errors,[x]:control.getError(x)})),{}),get ngxControlErrorOf(){return this.$implicit},track,control})}))}set _track(track){this.track$.set(track)}set _control(control){this.control$.set(control)}set _errorStateMatcher(errorStateMatcher){this.errorStateMatcher$.set(errorStateMatcher)}get context(){return this._viewContainerRef.get(0)?.context}},_class.ngTemplateContextGuard=(directive,context)=>!0,_class.propDecorators={_track:[{type:fesm2022_core.Input,args:[{alias:"ngxControlErrorTrack",required:!0}]}],_control:[{type:fesm2022_core.Input,args:[{alias:"ngxControlErrorOf",required:!0}]}],_errorStateMatcher:[{type:fesm2022_core.Input,args:[{alias:"ngxControlErrorErrorStateMatcher"}]}]},_class);ControlError=(0,tslib_es6.gn)([(0,fesm2022_core.Directive)({selector:"[ngxControlError]",standalone:!0})],ControlError);const control_error_stories={title:"Common/Control Error",decorators:[(0,dist.moduleMetadata)({imports:[ControlError,form_field.lN,input.c,fesm2022_forms.UX]}),(0,dist.applicationConfig)({providers:[(0,animations.provideAnimations)()]})],render:args=>({props:args,template:'<mat-form-field>\n    <mat-label>{{ label }}</mat-label>\n    <input matInput [formControl]="control">\n    <mat-error *ngxControlError="let errors of control; track: error">{{ errors | json }}</mat-error>\n    </mat-form-field>'}),args:{label:"some control"},argTypes:{control:{table:{disable:!0}}}},Basic={args:{error:"required",control:new fesm2022_forms.NI("",fesm2022_forms.kI.required)}},AsyncValidator={args:{error:["required","minlength"],control:new fesm2022_forms.NI("",void 0,[control=>(0,of.of)(fesm2022_forms.kI.required(control)).pipe((0,delay.g)(1e3)),control=>(0,of.of)(fesm2022_forms.kI.minLength(5)(control)).pipe((0,delay.g)(2e3))])}},Multiple={args:{error:["required","minlength"],control:new fesm2022_forms.NI("",[fesm2022_forms.kI.required,fesm2022_forms.kI.minLength(5)])}},ShowErrorOnDirtyOrTouched={args:{error:["required","minlength"],control:new fesm2022_forms.NI("",[fesm2022_forms.kI.required,fesm2022_forms.kI.minLength(5)])},decorators:[(0,dist.applicationConfig)({providers:[{provide:core.rD,useValue:{isErrorState:(control,parent)=>control.invalid&&(control.dirty||control.touched||!!parent?.submitted)}},(errorStateMatcher=(control,parent)=>control.invalid&&(control.dirty||control.touched||!!parent?.submitted),{provide:ERROR_STATE_MATCHER,useValue:errorStateMatcher})]})]};var errorStateMatcher}}]);